<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ism="http://www.ism.org/pi"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      id="html">
    
    <h:head>
        <title><ui:insert name="title">#{imoka.AppName}</ui:insert></title>
        <link rel="shortcut icon" href="#{resource['img/favico.png']}" type="image/x-png" /> 

        <f:facet name="last">
            <h:outputStylesheet library="css" name="layout.min.css" />
            <h:outputStylesheet library="css" name="global.min.css" />
            <h:outputStylesheet library="css" name="ribbon.min.css" />
            <h:outputStylesheet library="css" name="scada.min.css" />

            
            <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
            <h:outputScript library="primefaces" name="jquery/jquery-plugins.js" target="head" />
            
            <h:outputScript library="jquery" name="jquery-2.2.3.min.js" target="head" />
            <h:outputScript library="jquery" name="jquery-ui.min.js" target="head" />


        </f:facet>
    </h:head>

    <h:body id="body" >
        <!--    Reste affiché pendant 5s
                Montre un résumer et affiche les détails
                Seul les messages sans id sont affiché
        -->
        <p:growl id="growl" life="5000" 
                 showDetail="true" showSummary="true" escape="false"/>  




        <p:layout id="fullPage" fullPage="true"
                  resizeTitle="Réduire ou Double click pour réduire"
                  collapseTitle="Réduire la taille"
                  expandTitle="Etirer ou Double click pour restaurer"
                  closeTitle="Fermer"
                  stateful="true" 
                  widgetVar="fpLayoutWidget"
                  > 


            <p:layoutUnit id="unitNorth" position="north" 
                          size="#{viewLayout.northUnit.size}"
                          resizable="#{viewLayout.northUnit.resizable}" 
                          closable="#{viewLayout.northUnit.closable}"
                          collapsible="#{viewLayout.northUnit.collapsible}"
                          minSize="#{viewLayout.northUnit.minSize}"
                          maxSize="#{viewLayout.northUnit.maxSize}"
                          gutter="#{viewLayout.northUnit.gutter}"
                          visible="#{viewLayout.northUnit.visible}"
                          collapsed="#{viewLayout.northUnit.collapsed}"
                          collapseSize="#{viewLayout.northUnit.collapseSize}"
                          effect="#{viewLayout.northUnit.effect}"
                          effectSpeed="#{viewLayout.northUnit.effectSpeed}"
                          >



                <h:form id="mainForm">
                    <!--
                    <style>
                        .ui-ribbon .ui-button-icon-left.ui-icon.ui-c{
                            margin: 0px!important;
                            padding: 0px!important;
                            float: left;
                            width: 48px!important;
                            height: 48px!important;
                            margin-left: 8px!important;
                            margin-top: -34px!important;
                        }
                        .ui-ribbon  span.ui-button-text.ui-c{
                            margin: 0px!important;
                            margin:auto!important;
                            padding: 0px!important;
                            width:  42px!important;
                            max-height: 16px!important;
                            margin-top: 48px!important;
                        }
                        .ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-text-icon-left{
                        }

                        .ui-ribbonicon-home{
                            background: url("#{resource['img/ribbon/home.png']}") no-repeat!important;
                            background-size:contain!important;
                        }
                        .ui-ribbonicon-machines{
                            background: url("#{resource['img/ribbon/machine.png']}") no-repeat!important;
                            background-size:contain!important;
                        }


                        .ui-datatable.ui-widget{
                            font-family: arial!important;
                            font-size: 0.85em!important;
                        }
                        div.ui-datatable-header.ui-widget-header.ui-corner-top{
                            padding: 0px!important;
                            min-height: 24px!important;
                        }
                        div.ui-datatable-header.ui-widget-header.ui-corner-top button, input{
                            padding: 0px!important;
                            height: 16px!important;
                            min-height: 22px!important;
                        }


                        #output .ui-editor.ui-widget-content{
                            height: 100vh!important;
                        }
                        #output .ui-editor-toolbar{
                            display: none;
                        }
                        #output_input{
                            font-size: 0.85em!important;
                        }
                        #output iframe{
                            height: 100%!important;
                        }
                        #output #document{
                            
                        }
                    
                    </style>
                    -->
                    <ism:ribbon id="Menu">
                        <ism:ribManager >

                        </ism:ribManager>

                        <ism:tab name="Home" title="Setups">
                            <ism:ribGroup id="homeGroup" label="Home">
                                <ism:ribSet set="big">
                                    <p:commandButton id="BtnRibHome"
                                                     title="Accéder à la page d'acceuil."
                                                     action="/index.xhtml?faces-redirect=true"
                                                     icon="ui-ribbonicon-home" 
                                                     value="Acceuil"
                                                     />
                                </ism:ribSet>
                            </ism:ribGroup>
                        </ism:tab>
                        <ism:tab name="Machines" title="Specify the machines" >
                            <ism:ribGroup id="ribSetup" label="Configurations">
                                <ism:ribSet set="big">
                                    <p:commandButton id="BtnRibManagePLC"
                                                     title="Gestion des machines (PLC, HMI)"
                                                     action="/app/machines/List.xhtml?faces-redirect=true"
                                                     icon="ui-ribbonicon-machines" 
                                                     value="Machines"
                                                     />
                                    <p:commandButton id="BtnRibConnectPLC"
                                                     title="Connection des machine (PLC, HMI)"
                                                     action="/app/machines/Connect.xhtml?faces-redirect=true"
                                                     icon="ui-ribbonicon-machines" 
                                                     value="Machines"
                                                     />

                                </ism:ribSet>
                            </ism:ribGroup>
                        </ism:tab>
                        <ism:tab name="Affichage" title="Gestionnaire de l'affichage" >
                            <ism:ribGroup id="managedLayoutGroup" label="Fenêtre">
                                <ism:ribSet id="manageLayoutAuto" set="big">
                                    <p:commandButton id="btnLayoutAuto"
                                                     icon="ui-icon-layoutInit"
                                                     value="Réinitialiser"
                                                     actionListener="#{viewLayout.handleInitLayout()}"
                                                     update="fullPage"/>
                                </ism:ribSet>
                                <ism:ribSet id="manageLayoutOC" set="small" >
                                    <p:commandButton value="Menu" type="button"  
                                                     icon="ui-icon-layoutWest"
                                                     onclick="PF('fpLayoutWidget').toggle('west')"/>  
                                    <p:commandButton value="Options" type="button"  
                                                     icon="ui-icon-layoutEast"
                                                     onclick="PF('fpLayoutWidget').toggle('east')"/>  
                                    <p:commandButton value="Log" type="button"  
                                                     icon="ui-icon-layoutSouth"
                                                     onclick="PF('fpLayoutWidget').toggle('south')"/>  
                                </ism:ribSet>

                            </ism:ribGroup>
                        </ism:tab>
                    </ism:ribbon>
                </h:form>
            </p:layoutUnit>



            <p:layoutUnit   id="unitWest" position="west" 
                            size="#{viewLayout.westUnit.size}"
                            resizable="#{viewLayout.westUnit.resizable}" 
                            closable="#{viewLayout.westUnit.closable}"
                            collapsible="#{viewLayout.westUnit.collapsible}"
                            minSize="#{viewLayout.westUnit.minSize}"
                            gutter="#{viewLayout.westUnit.gutter}"
                            visible="#{viewLayout.westUnit.visible}"
                            collapsed="#{viewLayout.westUnit.collapsed}"
                            collapseSize="#{viewLayout.westUnit.collapseSize}"
                            effect="#{viewLayout.westUnit.effect}"
                            effectSpeed="#{viewLayout.westUnit.effectSpeed}"
                            >
                <f:facet name="header"><h:outputText value="Menu"/></f:facet> 
                <ui:insert id="west" name="west" />
            </p:layoutUnit>  


            <p:layoutUnit id="unitEast" position="east" 
                          size="#{viewLayout.eastUnit.size}"
                          resizable="#{viewLayout.eastUnit.resizable}" 
                          closable="#{viewLayout.eastUnit.closable}"
                          collapsible="#{viewLayout.eastUnit.collapsible}"
                          minSize="#{viewLayout.eastUnit.minSize}"
                          maxSize="#{viewLayout.eastUnit.maxSize}"
                          gutter="#{viewLayout.eastUnit.gutter}"
                          visible="#{viewLayout.eastUnit.visible}"
                          collapsed="#{viewLayout.eastUnit.collapsed}"
                          collapseSize="#{viewLayout.eastUnit.collapseSize}"
                          effect="#{viewLayout.eastUnit.effect}"
                          effectSpeed="#{viewLayout.eastUnit.effectSpeed}"
                          >
                <f:facet name="header">
                    <h:graphicImage library="img" name="ism/std/Options.png" width="22px" height="22px" style="float:left;" /> 
                    <h:outputText value="Options"/> </f:facet>  
                <ui:insert id="east" name="east" />
            </p:layoutUnit>


            <p:layoutUnit id="unitSouth" position="south" 
                          size="200"
                          resizable="#{viewLayout.southUnit.resizable}" 
                          closable="#{viewLayout.southUnit.closable}"
                          collapsible="#{viewLayout.southUnit.collapsible}"
                          minSize="#{viewLayout.southUnit.minSize}"
                          
                          gutter="#{viewLayout.southUnit.gutter}"
                          visible="true"
                          collapsed="false"
                          collapseSize="#{viewLayout.southUnit.collapseSize}"
                          effect="#{viewLayout.southUnit.effect}"
                          effectSpeed="#{viewLayout.southUnit.effectSpeed}"
                          style="padding: 0px;"
                          >
                <f:facet name="header"><h:outputText value="Console"/></f:facet> 
                <p:editor id="output" 
                          controls=""
                          value="#{console.out}" 
                          disabled="true"  />

            </p:layoutUnit>  




            <p:layoutUnit id="unitCenter" position="center" collapseSize="4" gutter="4" style="margin:0px;margin-left: -15px;">
                <ui:insert id="body" name="body" />
            </p:layoutUnit>





        </p:layout>













        <h:form id="MainFormDialog">
            <p:dialog header="Déconnexion imminante" 
                      widgetVar="dlgReminingTimeSessionWakeUp" 
                      modal="true" height="50" width="400" 
                      closable="false" resizable="false" >
                <h:outputText value="Continuer avec ISM ... " /> <br />
                <h:outputText value="#{viewRibbon.currentPath}" />
                <br /><br />


                <f:facet name="footer" >
                    <p:commandButton id="dlgReminingTimeSessionWakeUpYes" 
                                     value="#{ism.Accept}"
                                     onclick="PF('dlgReminingTimeSessionWakeUp').hide();
                                             location.reload(true);"
                                     action="#{viewRibbon.reloadCurrentPath()}"
                                     />
                    <p:commandButton id="dlgReminingTimeSessionWakeUpNo" 
                                     value="#{ism.Refused}"
                                     onclick="PF('dlgReminingTimeSessionWakeUp').hide();"
                                     action="#{staffAuthController.logout()}"
                                     />
                </f:facet>
            </p:dialog> 

            <p:confirmDialog id="mainConfirmDialog" 
                             global="#{viewConfirmDialog.dlg.global}"
                             header="#{viewConfirmDialog.header}"
                             severity="#{viewConfirmDialog.severity}"
                             width="#{viewConfirmDialog.dlg.width}"
                             height="#{viewConfirmDialog.dlg.height}"
                             closable="#{viewConfirmDialog.dlg.closable}"
                             showEffect="#{viewConfirmDialog.dlg.showEffect}"
                             hideEffect="#{viewConfirmDialog.dlg.hideEffect}"
                             closeOnEscape="#{viewConfirmDialog.dlg.closeOnEscape}"
                             widgetVar="mainConfirmDialog"
                             >
                <f:facet name="message">
                    <p:graphicImage library="img" 
                                    name="#{viewConfirmDialog.severity=='alert'?'ism/std/DlgWarning.png':'ism/std/DlgInfos.png'}"
                                    width="48" height="48" style="float: left;" />
                    <h:outputFormat value="#{viewConfirmDialog.message}" escape="false"/>
                </f:facet>

                <p:commandButton type="button" value="#{ism.ConfirmYes}" 
                                 styleClass="ui-confirmdialog-yes"
                                 icon="ui-btn-Accept"
                                 update="#{viewConfirmDialog.update}"
                                 oncomplete="PF('mainConfirmDialog').hide()"
                                 />
                <p:commandButton type="button" value="#{ism.ConfirmNo}" 
                                 styleClass="ui-confirmdialog-no"
                                 icon="ui-btn-Cancel"
                                 oncomplete="PF('mainConfirmDialog').hide()"
                                 />
            </p:confirmDialog>



            <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false"
                      closable="false">
                <p:graphicImage width="48px" 
                                height="48px" library="img" 
                                name="std/Onload.gif"/>
            </p:dialog>

            <p:ajaxStatus onstart="PF('statusDialog').show()" 
                          oncomplete="PF('statusDialog').hide();"/>


        </h:form>



    </h:body>

</html>

